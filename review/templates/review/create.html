{% extends 'base.html' %}
{% block content %}
    <div style="text-align: center; max-width: 200rem; margin: 0 auto;">
        <div class="mb-4">
            <h4>리뷰 작성</h4>
        </div>
        <form action="{% url 'review:review_create' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="display: flex; margin: 0 auto; align-content: center; justify-content: center; align-items: center">
                <div id="preview" style="width: 100px; height: 107.5px; border: 1px solid #8f8f8f; border-radius: 2rem; align-items: center; align-content: center;">
                    <label id='img_label' for="image">이미지를 선택해주세요</label>
                    <input style="display: none;" id='image' type="file" onchange="setThumbnail(event)"  name="image" multiple>
                    <img id="preview_img" src="">
                </div>

                <div style="margin-left: 1rem;">
                    <textarea style="width: 400px; height: 100px; border-radius: 2rem;padding: 1rem; align-items: center; align-content: center;" name="content" placeholder="리뷰를 작성해해주세요."></textarea>
                </div>

                {% if user.is_authenticated %}
                <input style="margin-left: 1rem;" type="submit" class="btn btn-primary">
                {% endif %}
            </div>
        </form>
    </div>
<script>
    function setThumbnail(event) {
        for (var image of event.target.files) {
            var reader = new FileReader();
            reader.onload = function(event) {
                let img_label = document.getElementById("img_label");
                img_label.style.color = 'rgba(255, 255, 255, 0)';
                let preview = document.getElementById('preview');
                preview.style.backgroundImage = `url(${event.target.result})`;
                preview.style.backgroundSize = '100% 100%';
            };
            reader.readAsDataURL(image);
        }
    }
</script>
{% endblock %}